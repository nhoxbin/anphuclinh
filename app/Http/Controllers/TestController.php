<?php

namespace App\Http\Controllers;

use App\Models\Product;
use App\Models\User;
use Illuminate\Http\Request;
use Illuminate\Support\Str;

class TestController extends Controller
{
    public function __invoke()
    {
        $data = [
            '0325167169' => '3000000.00',
            '0325577711' => '3000000.00',
            '0327608988' => '3000000.00',
            '0329405396' => '3000000.00',
            '0329418982' => '3000000.00',
            '0329910714' => '3000000.00',
            '0332298555' => '3000000.00',
            '0335886964' => '3000000.00',
            '0337152081' => '3000000.00',
            '0337591587' => '3000000.00',
            '0338800507' => '3000000.00',
            '0338879970' => '3000000.00',
            '0339290355' => '3000000.00',
            '0344132555' => '3000000.00',
            '0344143187' => '3000000.00',
            '0344245679' => '3000000.00',
            '0346213841' => '3000000.00',
            '0347379560' => '3000000.00',
            '0347934644' => '3000000.00',
            '0349234339' => '3000000.00',
            '0349345644' => '3000000.00',
            '0352470807' => '3000000.00',
            '0352498246' => '3000000.00',
            '0353503842' => '3000000.00',
            '0353694500' => '3000000.00',
            '0353724661' => '3000000.00',
            '0353963266' => '3000000.00',
            '0355043768' => '3000000.00',
            '0355872872' => '3000000.00',
            '0356171654' => '3000000.00',
            '0356732223' => '3000000.00',
            '0358125348' => '3000000.00',
            '0358299085' => '3000000.00',
            '0358810902' => '3000000.00',
            '0359931027' => '3000000.00',
            '0362309421' => '3000000.00',
            '0362569217' => '3000000.00',
            '0362589584' => '3000000.00',
            '0362814868' => '3000000.00',
            '0364770797' => '3000000.00',
            '0365565828' => '3000000.00',
            '0365888868' => '3000000.00',
            '0366058143' => '3000000.00',
            '0366820027' => '3000000.00',
            '0366982981' => '3000000.00',
            '0367259558' => '3000000.00',
            '0367970909' => '3000000.00',
            '0368134439' => '3000000.00',
            '0368636221' => '3000000.00',
            '03687993460' => '3000000.00',
            '0369284459' => '3000000.00',
            '0369375166' => '3000000.00',
            '0369422556' => '3000000.00',
            '0369738295' => '3000000.00',
            '0369807240' => '3000000.00',
            '0372437318' => '3000000.00',
            '0372624203' => '3000000.00',
            '0372924564' => '3000000.00',
            '0372932039' => '3000000.00',
            '0372957883' => '3000000.00',
            '0373348203' => '3000000.00',
            '0373834876' => '3000000.00',
            '0373857909' => '3000000.00',
            '0374060441' => '3000000.00',
            '0374155962' => '3000000.00',
            '0375308194' => '3000000.00',
            '0375325377' => '3000000.00',
            '0375375488' => '3000000.00',
            '0376786109' => '3000000.00',
            '0377691888' => '3000000.00',
            '0377932988' => '3000000.00',
            '0378123984' => '3000000.00',
            '0378173167' => '3000000.00',
            '0378493038' => '3000000.00',
            '0379688444' => '3000000.00',
            '0379831980' => '3000000.00',
            '0379994710' => '3000000.00',
            '0383113418' => '3000000.00',
            '0384160393' => '3000000.00',
            '0384357875' => '3000000.00',
            '0384839561' => '3000000.00',
            '0386423759' => '3000000.00',
            '0386782445' => '3000000.00',
            '0386880407' => '3000000.00',
            '0387013838' => '3000000.00',
            '0387282295' => '3000000.00',
            '0388139930' => '3000000.00',
            '0388727569' => '3000000.00',
            '0389346455' => '3000000.00',
            '0399931136' => '3000000.00',
            '0393397355' => '3000000.00',
            '0393926163' => '3000000.00',
            '0394834787' => '3000000.00',
            '0394884759' => '3000000.00',
            '0395193686' => '3000000.00',
            '0395320211' => '3000000.00',
            '0396406165' => '3000000.00',
            '0397128911' => '3000000.00',
            '0397130577' => '3000000.00',
            '0397830486' => '3000000.00',
            '0398217811' => '3000000.00',
            '0399064978' => '3000000.00',
            '0703136991' => '3000000.00',
            '0707383838' => '3000000.00',
            '0765968860' => '3000000.00',
            '0782393899' => '3000000.00',
            '0789962857' => '3000000.00',
            '0794777526' => '3000000.00',
            '0798193147' => '3000000.00',
            '0798517319' => '3000000.00',
            '0818471785' => '3000000.00',
            '0825668176' => '3000000.00',
            '0828829863' => '3000000.00',
            '0839185188' => '3000000.00',
            '0842290629' => '3000000.00',
            '0847044044' => '3000000.00',
            '0848718080' => '3000000.00',
            '0856046745' => '3000000.00',
            '0862369388' => '3000000.00',
            '0862966288' => '3000000.00',
            '0865019065' => '3000000.00',
            '0868198604' => '3000000.00',
            '0868609123' => '3000000.00',
            '0868920346' => '3000000.00',
            '0869394058' => '3000000.00',
            '0869947392' => '3000000.00',
            '0886625862' => '3000000.00',
            '0898713795' => '3000000.00',
            '0898756403' => '3000000.00',
            '0908642040' => '3000000.00',
            '0901643978' => '3000000.00',
            '0901682365' => '3000000.00',
            '0902036682' => '3000000.00',
            '0902444738' => '3000000.00',
            '0902838836' => '3000000.00',
            '0903112912' => '3000000.00',
            '0906019602' => '3000000.00',
            '0906067665' => '3000000.00',
            '0906119626' => '3000000.00',
            '0906388088' => '3000000.00',
            '0908328112' => '3000000.00',
            '0909256195' => '6000000.00',
            '0909528579' => '3000000.00',
            '0912051617' => '3000000.00',
            '0912289185' => '3000000.00',
            '0912588192' => '3000000.00',
            '0912859672' => '3000000.00',
            '0912864705' => '3000000.00',
            '0913494777' => '3000000.00',
            '0913275508' => '3000000.00',
            '0913655794' => '3000000.00',
            '0914141672' => '3000000.00',
            '0914919905' => '3000000.00',
            '0914989887' => '3000000.00',
            '0915101185' => '3000000.00',
            '0915369553' => '3000000.00',
            '0915371780' => '3000000.00',
            '0915551227' => '3000000.00',
            '0915666128' => '3000000.00',
            '0915681925' => '3000000.00',
            '0916086929' => '3000000.00',
            '0916189165' => '3000000.00',
            '0916478074' => '3000000.00',
            '0916684128' => '3000000.00',
            '0917543190' => '3000000.00',
            '0918042257' => '3000000.00',
            '0918479746' => '3000000.00',
            '0919453439' => '3000000.00',
            '0919760298' => '3000000.00',
            '0922621888' => '3000000.00',
            '0932526996' => '3000000.00',
            '0931254029' => '3000000.00',
            '0931687069' => '3000000.00',
            '0932006997' => '3000000.00',
            '0932102834' => '3000000.00',
            '0932170280' => '3000000.00',
            '0932249468' => '3000000.00',
            '0932790850' => '3000000.00',
            '0932876034' => '3000000.00',
            '0933209956' => '3000000.00',
            '0933439228' => '3000000.00',
            '0933776811' => '3000000.00',
            '0933893666' => '3000000.00',
            '0933982796' => '3000000.00',
            '0934079134' => '3000000.00',
            '0934263040' => '3000000.00',
            '0935057055' => '3000000.00',
            '0936321731' => '3000000.00',
            '0936708369' => '3000000.00',
            '0936790809' => '3000000.00',
            '0937182079' => '3000000.00',
            '0937409469' => '3000000.00',
            '0937557007' => '3000000.00',
            '0937572339' => '3000000.00',
            '0937775640' => '3000000.00',
            '0938534719' => '3000000.00',
            '0938754944' => '3000000.00',
            '0939058555' => '3000000.00',
            '0939311668' => '3000000.00',
            '0943303634' => '3000000.00',
            '0944873403' => '3000000.00',
            '0945003186' => '3000000.00',
            '0945306057' => '3000000.00',
            '0946332266' => '3000000.00',
            '0947024726' => '6000000.00',
            '0947031560' => '3000000.00',
            '0948256345' => '3000000.00',
            '0949096097' => '3000000.00',
            '0949792078' => '3000000.00',
            '0961055939' => '3000000.00',
            '0961249238' => '3000000.00',
            '0962308016' => '3000000.00',
            '0962566755' => '3000000.00',
            '0962666815' => '3000000.00',
            '0962972686' => '3000000.00',
            '0963321385' => '3000000.00',
            '0963999659' => '3000000.00',
            '0964049086' => '3000000.00',
            '0964177258' => '3000000.00',
            '0964263816' => '3000000.00',
            '0964308577' => '3000000.00',
            '0964379395' => '3000000.00',
            '0964614497' => '3000000.00',
            '0964949163' => '3000000.00',
            '0964999581' => '3000000.00',
            '0965027001' => '3000000.00',
            '0965414334' => '3000000.00',
            '0965466592' => '3000000.00',
            '0966038131' => '3000000.00',
            '0966163257' => '3000000.00',
            '0966291618' => '3000000.00',
            '0966369061' => '3000000.00',
            '0966574187' => '3000000.00',
            '0966587108' => '3000000.00',
            '0966892337' => '3000000.00',
            '0967017789' => '3000000.00',
            '0967247288' => '3000000.00',
            '0967264142' => '3000000.00',
            '0967477748' => '3000000.00',
            '0967623683' => '3000000.00',
            '0967767111' => '3000000.00',
            '0968072628' => '3000000.00',
            '0968182566' => '3000000.00',
            '0968253399' => '3000000.00',
            '0968333812' => '3000000.00',
            '0968909105' => '3000000.00',
            '0969439111' => '3000000.00',
            '0969543106' => '3000000.00',
            '0969591810' => '3000000.00',
            '0969778806' => '3000000.00',
            '0969784335' => '3000000.00',
            '0971031555' => '3000000.00',
            '0971261956' => '3000000.00',
            '0971346161' => '3000000.00',
            '0972053125' => '3000000.00',
            '0972395566' => '3000000.00',
            '0972542832' => '3000000.00',
            '0972731590' => '3000000.00',
            '0972813375' => '3000000.00',
            '0972845903' => '3000000.00',
            '0973134167' => '3000000.00',
            '0973529247' => '3000000.00',
            '0973540650' => '3000000.00',
            '0973625823' => '3000000.00',
            '0973656073' => '3000000.00',
            '0973775295' => '3000000.00',
            '0973923768' => '3000000.00',
            '0973983292' => '3000000.00',
            '0973997414' => '3000000.00',
            '0974101625' => '3000000.00',
            '0974101801' => '3000000.00',
            '0974133003' => '3000000.00',
            '0974596954' => '3000000.00',
            '0974848392' => '3000000.00',
            '0974978144' => '3000000.00',
            '0975116926' => '3000000.00',
            '0975357345' => '3000000.00',
            '0975460563' => '3000000.00',
            '0975543493' => '3000000.00',
            '0975586406' => '3000000.00',
            '0975603152' => '3000000.00',
            '0975627233' => '3000000.00',
            '0976414012' => '3000000.00',
            '0976765630' => '3000000.00',
            '0976845079' => '3000000.00',
            '0976861682' => '3000000.00',
            '0976881293' => '3000000.00',
            '0977016159' => '3000000.00',
            '0977054648' => '3000000.00',
            '0977396951' => '3000000.00',
            '0977451022' => '3000000.00',
            '0977452640' => '3000000.00',
            '0977814375' => '3000000.00',
            '0977931111' => '3000000.00',
            '0978065963' => '3000000.00',
            '0978081495' => '3000000.00',
            '0978358069' => '3000000.00',
            '0978395915' => '3000000.00',
            '0978595207' => '3000000.00',
            '0978806726' => '3000000.00',

            '0979150762' => '3000000.00',
            '0979257159' => '3000000.00',
            '0979424792' => '3000000.00',
            '0979430183' => '3000000.00',
            '0979814561' => '3000000.00',
            '0981155615' => '3000000.00',
            '0981366815' => '3000000.00',
            '0981427797' => '6000000.00',
            '0981436556' => '3000000.00',
            '0981615694' => '3000000.00',
            '0981782083' => '3000000.00',
            '0981916706' => '3000000.00',
            '0982076563' => '3000000.00',
            '0982099427' => '3000000.00',
            '0982367047' => '6000000.00',
            '0982606777' => '3000000.00',
            '0982819045' => '3000000.00',
            '0982932450' => '3000000.00',
            '0983060922' => '3000000.00',
            '0983115222' => '3000000.00',
            '0983275769' => '3000000.00',
            '0983520147' => '3000000.00',
            '0983572603' => '3000000.00',
            '0983745694' => '3000000.00',
            '0983856390' => '3000000.00',
            '0983986815' => '3000000.00',
            '0984009431' => '3000000.00',
            '0984498538' => '3000000.00',
            '0984618444' => '3000000.00',
            '0984619555' => '3000000.00',
            '0984635731' => '3000000.00',
            '0984784114' => '3000000.00',
            '0984985556' => '3000000.00',
            '0985030888' => '3000000.00',
            '0985616507' => '3000000.00',
            '0985616508' => '3000000.00',
            '0985638778' => '3000000.00',
            '0985939003' => '3000000.00',
            '0985957326' => '3000000.00',
            '0986426196' => '3000000.00',
            '0986426938' => '3000000.00',
            '0986581486' => '3000000.00',
            '0986701852' => '3000000.00',
            '0987364268' => '3000000.00',
            '0987567998' => '3000000.00',
            '0987937615' => '3000000.00',
            '0988051253' => '3000000.00',
            '0988085967' => '3000000.00',
            '0988375780' => '3000000.00',
            '0988494008' => '3000000.00',
            '0988753890' => '3000000.00',
            '0989016996' => '3000000.00',
            '0989038068' => '6000000.00',
            '0989054185' => '3000000.00',
            '0989304634' => '3000000.00',
            '0989386554' => '3000000.00',
            '0989580562' => '3000000.00',
            '0989805376' => '3000000.00',
            '0989819815' => '3000000.00',
            '0989994233' => '3000000.00',
            '84965561623' => '3000000.00',

            '0325385696' => '3000000',
            '0328221827' => '3000000',
            '0332299391' => '3000000',
            '0332426868' => '3000000',
            '0333655507' => '3000000',
            '0334480661' => '3000000',
            '0335066270' => '3000000',
            '0336482239' => '3000000',
            '0337157218' => '3000000',
            '0337339810' => '3000000',
            '0344813900' => '3000000',
            '0345268073' => '3000000',
            '0346886486' => '3000000',
            '0348348888' => '3000000',
            '0348707586' => '3000000',
            '0348785951' => '3000000',
            '0352653367' => '3000000',
            '0355507568' => '3000000',
            '0357840233' => '3000000',
            '0358342852' => '3000000',
            '0362048122' => '3000000',
            '0364303009' => '3000000',
            '0366041261' => '3000000',
            '0366663366' => '6000000',
            '0368054381' => '3000000',
            '0368537228' => '6000000',
            '0369958848' => '3000000',
            '0372715399' => '3000000',
            '0373421798' => '3000000',
            '0376832145' => '3000000',
            '0382579502' => '3000000',
            '0383142264' => '3000000',
            '0383746608' => '3000000',
            '0383896892' => '3000000',
            '0384068337' => '3000000',
            '0384293668' => '3000000',
            '0384898567' => '3000000',
            '0385926708' => '3000000',
            '0386976734' => '3000000',
            '0388172156' => '3000000',
            '0392095448' => '3000000',
            '0392610964' => '3000000',
            '0392905565' => '3000000',
            '0394411807' => '3000000',
            '0395268450' => '3000000',
            '0396277377' => '3000000',
            '0397453900' => '3000000',
            '0523288578' => '3000000',
            '0708969699' => '3000000',
            '0773953889' => '3000000',
            '0785555384' => '3000000',
            '0794510291' => '3000000',
            '0828268996' => '3000000',
            '0842290629' => '3000000',
            '0843112123' => '3000000',
            '0846970934' => '3000000',
            '0848439488' => '3000000',
            '0862499670' => '3000000',
            '0862588238' => '3000000',
            '0862588283' => '3000000',
            '0862856669' => '3000000',
            '0866105216' => '3000000',
            '0868520289' => '3000000',
            '0869614277' => '3000000',
            '0888268566' => '3000000',
            '0898190586' => '3000000',
            '0899650871' => '3000000',
            '0901628240' => '3000000',
            '0903870327' => '3000000',
            '0903952238' => '6000000',
            '0904876300' => '3000000',
            '0907492992' => '6000000',
            '0907532846' => '3000000',
            '0907595196' => '3000000',
            '0908286408' => '3000000',
            '0909517866' => '3000000',
            '0914855822' => '3000000',
            '0911039202' => '3000000',
            '0911456668' => '3000000',
            '0912310578' => '3000000',
            '0912414889' => '3000000',
            '0912491688' => '6000000',
            '0912599260' => '3000000',
            '0912860699' => '3000000',
            '0913434442' => '3000000',
            '0913434443' => '3000000',
            '0913994668' => '3000000',
            '0914388165' => '3000000',
            '0915744989' => '3000000',
            '0916016016' => '3000000',
            '0916084513' => '3000000',
            '0916359760' => '3000000',
            '0917308800' => '3000000',
            '0918860383' => '3000000',
            '0919412847' => '3000000',
            '0919485089' => '3000000',
            '0931318533' => '3000000',
            '0932091537' => '3000000',
            '0933298839' => '3000000',
            '0933709968' => '3000000',
            '0935247231' => '3000000',
            '0936038786' => '3000000',
            '0937055476' => '3000000',
            '0937481327' => '3000000',
            '0937997752' => '3000000',
            '0941904896' => '3000000',
            '0942610067' => '3000000',
            '0943061366' => '3000000',
            '0943066471' => '3000000',
            '0944010056' => '3000000',
            '0944101719' => '3000000',
            '0944846079' => '3000000',
            '0945592185' => '3000000',
            '0946488791' => '3000000',
            '0946869022' => '3000000',
            '0948800861' => '3000000',
            '0949282189' => '3000000',
            '0949855002' => '3000000',
            '0962132095' => '3000000',
            '0962406689' => '3000000',
            '0962963577' => '3000000',
            '0963106458' => '3000000',
            '0963149688' => '3000000',
            '0963720124' => '3000000',
            '0964162188' => '3000000',
            '0964783838' => '3000000',
            '0964882865' => '3000000',
            '0965298645' => '3000000',
            '0965535639' => '3000000',
            '0965558883' => '3000000',
            '0965956639' => '3000000',
            '0967461887' => '3000000',
            '0967547618' => '3000000',
            '0967979007' => '3000000',
            '0968004188' => '3000000',
            '0968634986' => '3000000',
            '0968857811' => '3000000',
            '0968997569' => '3000000',
            '0969302135' => '3000000',
            '0971095929' => '3000000',
            '0971728103' => '3000000',
            '0972607498' => '3000000',
            '0972784283' => '3000000',
            '0972844287' => '3000000',
            '0973058088' => '3000000',
            '0973429966' => '3000000',
            '0974516519' => '3000000',
            '0974832202' => '3000000',
            '0976292867' => '3000000',
            '0976592542' => '3000000',
            '0976874909' => '3000000',
            '0976898463' => '3000000',
            '0977275201' => '3000000',
            '0977604999' => '3000000',
            '0978270229' => '3000000',
            '0978331174' => '3000000',
            '0978373529' => '3000000',
            '0978603769' => '3000000',
            '0979242690' => '3000000',
            '0979395328' => '3000000',
            '0979525227' => '3000000',
            '0979562599' => '3000000',
            '0979644619' => '3000000',
            '0979749314' => '3000000',
            '0981080281' => '3000000',
            '0981516583' => '3000000',
            '0982202176' => '3000000',
            '0982359142' => '6000000',
            '0982666933' => '3000000',
            '0982742746' => '3000000',
            '0983409819' => '3000000',
            '0983478616' => '3000000',
            '0983528227' => '3000000',
            '0983829036' => '3000000',
            '0983853216' => '3000000',
            '0983861286' => '3000000',
            '0983969905' => '3000000',
            '0984138300' => '3000000',
            '0984845499' => '3000000',
            '0984911905' => '3000000',
            '0985499629' => '3000000',
            '0985799122' => '3000000',
            '0985965588' => '3000000',
            '0986334549' => '3000000',
            '0986931060' => '3000000',
            '0987264608' => '3000000',
            '0987693814' => '3000000',
            '0987756659' => '3000000',
            '0987874945' => '3000000',
            '0987985739' => '3000000',
            '0988267359' => '3000000',
            '0989024699' => '3000000',
            '0989452803' => '3000000',
            '0989464160' => '3000000',
            '8888999979' => '3000000',
            '0971586528' => '3000000',
        ];
        $user = User::whereIn('phone', array_keys($data))->get('phone')->toArray();
        $phone = array_column($user, 'phone');
        $phoneNotIn = array_diff(array_keys($data), $phone);
        foreach ($phoneNotIn as $phone) {
            User::updateOrCreate(['phone' => (string) $phone], [
                'name' => $phone,
                'level' => '0',
                'email_verified_at' => now(),
                'password' => bcrypt('123456'),
                'remember_token' => Str::random(10),
            ]);
        }

        try {
            $product_combo = Product::where('is_combo', 1)->first();
            $users = User::whereIn('phone', $phoneNotIn)->get();
            foreach ($users as $user) {
                $user->balance;
                $qty = $data[$user->phone]/3000000;
                $user->deposit(round($data[$user->phone]), ['qty' => $qty, 'product_id' => $product_combo->id, 'type' => 'purchase']);
                for ($i=0; $i < $qty; $i++) {
                    $user->pay($product_combo);
                }
                echo "{$user->phone}<br />";
            }
        } catch (\Exception $e) {
            dd($e);
        }
    }
}
